#include "Clients.h"
#include "Listik.h"
#include <iostream>
#include <string>
#include <random>
#include <vector>
#include <map>
#include <utility>

// Пример соответствий раса+роль -> подходящий товар
std::map<std::pair<std::string, std::string>, std::vector<std::string>> correctItems = {
    {{"человек", "воин"}, {"стальной меч", "латный доспех", "щит"}},
    {{"человек", "маг"}, {"волшебная палочка", "свиток огня", "простой амулет"}},
    {{"человек", "плут"}, {"стальной кинжал", "арболет", "тёмная мантия"}},
    {{"человек", "клоун"}, {"колотушка", "красный нос", "парик"}},
    {{"эльф", "воин"}, {"древестный меч", "элегантные стрелы", "лук"}},
    {{"эльф", "маг"}, {"магический посох", "свиток леса", "эльфийский амулет"}},
    {{"эльф", "плут"}, {"лунный кинжалы", "отравленный кинжал", "лунная мантия"}},
    {{"эльф", "клоун"}, {"элегантный грим", "булавы джонглёра", "цветочки"}},
    {{"дварф", "воин"}, {"боевой топор", "молот гномов", "руническая броня"}},
    {{"дварф", "маг"}, {"посох с рубином", "посох с аметистом", "посох с алмазом"}},
    {{"дварф", "плут"}, {"лёгкая кирка", "трос", "косплей асасина маленкого размера"}},
    {{"дварф", "клоун"}, {"скрипящие ботинки", "цветные шары", "светящиеся колотушка"}},
    {{"орк", "воин"}, {"двухручный меч", "шкура бронемедведя", "шипастый щит"}},
    {{"орк", "маг"}, {"каменный посох", "череп предков", "амулет из костей"}},
    {{"орк", "плут"}, {"зазубренные кинжалы", "отравленные стрелы", "шкура вепря"}},
    {{"орк", "клоун"}, {"тяжёлая колотушка", "огромный парик", "цветной костюм"}},
    // ... и другие комбинации
};
std::vector<std::string> allItems = {
    "стальной меч", "латный доспех", "щит",
    "волшебная палочка", "свиток огня", "простой амулет",
    "стальной кинжал", "арболет", "тёмная мантия",
    "колотушка", "красный нос", "парик",
    "древестный меч", "элегантные стрелы", "лук",
    "магический посох", "свиток леса", "эльфийский амулет",
    "лунный кинжалы", "отравленный кинжал", "лунная мантия",
    "элегантный грим", "булавы джонглёра", "цветочки",
    "боевой топор", "молот гномов", "руническая броня",
    "посох с рубином", "посох с аметистом", "посох с алмазом",
    "лёгкая кирка", "трос", "косплей асасина маленкого размера",
    "скрипящие ботинки", "цветные шары", "светящиеся колотушка",
    "двухручный меч", "шкура бронемедведя", "шипастый щит",
    "каменный посох", "череп предков", "амулет из костей",
    "зазубренные кинжалы", "отравленные стрелы", "шкура вепря",
    "тяжёлая колотушка", "огромный парик", "цветной костюм"
};

std::vector<std::string> rand_vect(std::vector<std::string> base_vector)
{
    srand(time(NULL));
    std::vector<std::string> temp_vector;
    int reps = base_vector.size();

    //Pull a random element from base_vector, add it to temp_vector, then delete it from base_vector
    for (int i = 0; i < reps; i++)
    {
        int random_number = rand() % base_vector.size();
        temp_vector.push_back(base_vector[random_number]);
        base_vector.erase(base_vector.begin() + random_number);
    }

    return temp_vector;
}

Listik gamePrep() {
    allItems = rand_vect(allItems);

};

int gameLoop(Listik gameData) {
	
};